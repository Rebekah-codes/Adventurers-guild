<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Member Dashboard â€¢ Adventurers Guild</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <main class="container">
    <h1>Member Dashboard</h1>
    <div id="content">Checking membership...</div>
  </main>

  <script>
    async function init() {
      const token = localStorage.getItem('apiToken');
      if (!token) { location.href = '/quests'; return; }
      try {
        const res = await fetch('/api/me/', { headers: { 'Authorization': 'Token ' + token } });
        if (!res.ok) { location.href = '/quests'; return; }
        const data = await res.json();
        if (!data.is_member) { document.getElementById('content').textContent = 'You are not yet a full member.'; return; }
        document.getElementById('content').innerHTML = '<p>Welcome, ' + data.username + '.</p><p>Member-only content goes here.</p>';
      } catch (err) {
        console.error(err);
        location.href = '/quests';
      }
    }
    init();
  </script>
</body>
</html>
